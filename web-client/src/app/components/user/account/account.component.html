<div class="container" *ngIf="userForm">
  <div class="row">
    <div class="col-md-6 offset-md-3">
      <h2>Change profile</h2>
      <form [formGroup]="userForm"  (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" formControlName="firstName" class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" 
            placeholder="First name" />
          <div class="invalid-feedback">First Name is required</div>
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input type="text" formControlName="lastName" class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }"
            placeholder="Last name" />
          <div class="invalid-feedback">Last Name is required.</div>
        </div>
        <div class="form-group">
          <label>Username</label>
          <input type="text" formControlName="username" class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f.username.errors }"
            autocomplete="off"/>
          <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
            <div *ngIf="f.username.errors.required">Username is required.</div>
            <div *ngIf="f.username.errors.isTaken">This username already exists.</div>
          </div>
        </div>
        <button type="button" class="form-group btn btn-info" (click)="onChangePassword()"
          [attr.aria-expanded]="!changePassword" aria-controls="collapseBasic">Change password
        </button>
        <div id="collapseBasic" [collapse]="!changePassword">
            <div class="form-group">
              <label>New Password</label>
              <input type="password" formControlName="password" class="form-control" 
                [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
                autocomplete="off"/>
              <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                <div *ngIf="f.password.errors.required">Password is required.</div>
                <div *ngIf="f.password.errors.minlength">Password must be at least {{passwordMinLenght}} characters.</div>
              </div>
            </div>
            <div class="form-group">
              <label>Confirm new password</label>
              <input type="password" formControlName="confirmPassword" class="form-control" 
                [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" 
                autocomplete="off"/>
              <div class="invalid-feedback">
                <div>Password doesn't match.</div>
              </div>
            </div>
        </div>
        <div class="form-group">
          <button [disabled]="userForm.pending" class="btn btn-info">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>
